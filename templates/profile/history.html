{% extends "profile/base.html" %} {% block profile_content %}
<div class="row">
  <h5>Generation History</h5>
  {% if generation_logs %}
  <table class="striped">
    <thead>
      <tr>
        <th>Date</th>
        <th>Type</th>
        <th>Task ID</th>
        <th>Predicted Cost</th>
        <th>Actual Cost</th>
        <th>Status</th>
        <th>Error</th>
      </tr>
    </thead>
    <tbody>
      {% for log in generation_logs %}
      <tr>
        <td>{{ log.timestamp.strftime('%Y-%m-%d %H:%M:%S') }}</td>
        <td>{{ log.generation_type }}</td>
        <td>{{ log.task_id }}</td>
        <td>
          {{ log.predicted_cost if log.predicted_cost is not none else 'N/A' }}
        </td>
        <td>{{ log.real_cost if log.real_cost is not none else 'N/A' }}</td>
        <td>{{ log.status }}</td>
        <td>{{ log.error_message or '' }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <!-- Pagination Controls -->
  <ul class="pagination">
    {% if pagination.has_prev %}
    <li class="waves-effect">
      <a href="{{ url_for('profile_views.history', page=pagination.prev_num) }}">« Prev</a>
    </li>
    {% else %}
    <li class="disabled"><a href="#!">« Prev</a></li>
    {% endif %}

    {% for page_num in pagination.iter_pages(left_edge=2, right_edge=2, left_current=2, right_current=2) %}
    {% if page_num %}
    {% if page_num == pagination.page %}
    <li class="active"><a href="#!">{{ page_num }}</a></li>
    {% else %}
    <li class="waves-effect"><a href="{{ url_for('profile_views.history', page=page_num) }}">{{ page_num }}</a></li>
    {% endif %}
    {% else %}
    <li class="disabled"><a href="#!">…</a></li>
    {% endif %}
    {% endfor %}

    {% if pagination.has_next %}
    <li class="waves-effect">
      <a href="{{ url_for('profile_views.history', page=pagination.next_num) }}">Next »</a>
    </li>
    {% else %}
    <li class="disabled"><a href="#!">Next »</a></li>
    {% endif %}
  </ul>
  {% else %}
  <p>No generation attempts logged yet.</p>
  {% endif %}
</div>
{% endblock %}